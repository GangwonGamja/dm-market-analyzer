# 데이터 수집 기능

## ✅ 구현된 기능

### 1. 자동 데이터 수집

#### 백엔드 시작 시 자동 로드
- 백엔드 서버 시작 시 자동으로 VIG, QLD 데이터 수집
- Fear & Greed Index 자동 수집
- 데이터가 없으면 자동으로 yfinance에서 가져옴

#### API 호출 시 자동 수집
- ETF 가격 조회 시 데이터가 없으면 자동으로 수집
- 시그널 생성 시 데이터가 없으면 자동으로 수집
- 지표 계산 시 데이터가 없으면 자동으로 수집

### 2. 실시간 데이터 수집

#### 프론트엔드에서 데이터 수집 버튼
- 스위칭 시그널 페이지에 "데이터 수집" 버튼 추가
- 클릭 시 VIG, QLD 데이터 실시간 수집
- 수집 완료 후 자동으로 시그널 다시 생성

#### 대시보드 자동 수집
- 대시보드 로드 시 데이터가 없으면 자동으로 수집
- 사용자에게 알림 메시지 표시

### 3. 데이터 소스

#### ETF 데이터 (yfinance)
- **VIG**: Vanguard Dividend Appreciation ETF
- **QLD**: ProShares Ultra QQQ (2x leveraged)
- 최근 2년 데이터 자동 수집
- 일봉 데이터 (OHLCV)

#### Fear & Greed Index
- Alternative.me 무료 API 사용
- 매일 업데이트
- 0-100 척도

## 📊 수집 데이터

### ETF 데이터
- Open, High, Low, Close (가격)
- Volume (거래량)
- Date (날짜)

### Fear & Greed Index
- Value (0-100)
- Classification (Extreme Fear ~ Extreme Greed)
- Date (날짜)

## 🚀 사용 방법

### 자동 수집
백엔드를 실행하면 자동으로 데이터를 수집합니다.

```powershell
.\start_backend.bat
```

### 수동 수집 (프론트엔드)
1. 스위칭 시그널 페이지 열기
2. "데이터 수집" 버튼 클릭
3. 수집 완료 대기 (약 10-30초)

### 수동 수집 (API)
```bash
# VIG 데이터 수집
POST http://localhost:8000/etf/VIG/update

# QLD 데이터 수집
POST http://localhost:8000/etf/QLD/update
```

## ⚠️ 주의사항

1. **첫 실행 시**
   - 백엔드 시작 시 자동으로 데이터를 수집하므로 초기 실행이 다소 느릴 수 있습니다.
   - 약 30초~1분 정도 소요될 수 있습니다.

2. **yfinance 제한**
   - yfinance는 무료 서비스이므로 과도한 요청 시 제한될 수 있습니다.
   - 적절한 간격(1시간 이상)을 두고 수집하는 것을 권장합니다.

3. **네트워크 연결**
   - 인터넷 연결이 필요합니다.
   - 방화벽이나 프록시 설정을 확인하세요.

## 🔧 문제 해결

### 데이터 수집 실패
1. 인터넷 연결 확인
2. yfinance 서비스 상태 확인
3. 백엔드 로그 확인
4. 수동으로 업데이트 API 호출

### 데이터가 계속 없음
1. 백엔드 재시작
2. 브라우저 새로고침
3. 데이터 수집 버튼 클릭

## 📝 로그 확인

백엔드 콘솔에서 다음과 같은 로그를 확인할 수 있습니다:

```
ETF 데이터 로딩 시작...
VIG 데이터 수집 시작...
VIG 데이터 가져옴: 504개 레코드
VIG 데이터 저장 완료
QLD 데이터 수집 시작...
QLD 데이터 가져옴: 504개 레코드
QLD 데이터 저장 완료
Fear & Greed Index 로드 완료
초기 데이터 로딩 완료
```



