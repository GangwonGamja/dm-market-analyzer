# 뉴스 수집 기능 강화 구현 완료

## ✅ 구현 완료 사항

### 1. 뉴스 수집 서비스
- ✅ Google News RSS 수집
- ✅ Yahoo Finance RSS 수집
- ✅ Reuters RSS 수집
- ✅ CNBC RSS 수집
- ✅ 해외 경제·증시 관련 최신 뉴스만 필터링
- ✅ 최신 기사 5~10개 수집
- ✅ 중복 제거 (제목+URL 해시 기반)

### 2. 데이터 구조화
- ✅ 제목 (title)
- ✅ 요약 (summary)
- ✅ 발행일 (published_date)
- ✅ URL (url)
- ✅ 출처 (source)
- ✅ 데이터베이스 저장 (SQLite)

### 3. 영어 전처리
- ✅ 불용어 제거 (NLTK stopwords)
- ✅ 토큰화 (NLTK word_tokenize)
- ✅ 텍스트 클리닝 (소문자 변환, 특수문자 제거)
- ✅ 단어 길이 필터링

### 4. 감성 분석
- ✅ VADER 감성 분석 모델 통합
- ✅ 긍정·중립·부정 비율 계산
- ✅ 종합 감성 점수 (0~100) 산출
- ✅ Compound score 기반 라벨링

### 5. 위험 키워드 감지
- ✅ "inflation, war, rate hike, recession, selloff" 등 20개 키워드 모니터링
- ✅ 자동 감지 및 리스트업
- ✅ JSON 형태로 저장

### 6. 백엔드 API 엔드포인트
- ✅ `GET /news` - 뉴스 및 감성 분석 통합 조회
- ✅ `GET /news/collect` - 뉴스 수집 및 처리
- ✅ `GET /news/latest` - 최신 뉴스 조회
- ✅ `GET /news/sentiment` - 감성 분석 요약

### 7. 프론트엔드 UI
- ✅ 최신 뉴스 리스트 (5~10개)
- ✅ 감성 점수 색상 시각화 (0~100)
- ✅ 위험 키워드 표시 (빨간색 배지)
- ✅ 긍·부정 비율 차트 (Pie Chart)
- ✅ "오늘의 뉴스 심리 지수" 위젯
- ✅ 뉴스 수집 버튼
- ✅ 링크 클릭으로 원문 보기

### 8. 알고리즘 반영
- ✅ 시장 심리 판단에 뉴스 감성 점수 반영 (가중치 20%)
- ✅ VIG-QLD 스위칭 신호 알고리즘에 뉴스 감성 반영
- ✅ 포트폴리오 비중 추천에 뉴스 감성 반영
- ✅ 위험 키워드가 많을 경우 신뢰도 조정

## 📊 API 응답 구조

### GET /news
```json
{
  "news": [
    {
      "id": 1,
      "title": "뉴스 제목",
      "summary": "요약",
      "published_date": "2024-01-01T00:00:00",
      "url": "https://...",
      "source": "Reuters",
      "sentiment": {
        "score": 0.5,
        "label": "positive"
      },
      "risk_keywords": ["inflation", "rate hike"]
    }
  ],
  "sentiment": {
    "overall_score": 65.5,
    "positive_count": 6,
    "neutral_count": 2,
    "negative_count": 2,
    "positive_ratio": 60.0,
    "neutral_ratio": 20.0,
    "negative_ratio": 20.0,
    "total_news": 10,
    "risk_keywords": ["inflation", "war", "recession"]
  }
}
```

## 🔧 사용 방법

### 1. 뉴스 수집
```
GET /news/collect?max_results=10
```

### 2. 최신 뉴스 조회
```
GET /news/latest?limit=10
```

### 3. 감성 분석 조회
```
GET /news/sentiment?limit=10
```

### 4. 통합 조회
```
GET /news?limit=10
```

## 🎯 알고리즘 반영 방법

### 시장 상태 판단
- FGI와 뉴스 감성 점수를 가중 평균하여 조정
- 조정된 FGI = FGI * 0.8 + (뉴스 점수 / 100 * 100) * 0.2

### 스위칭 시그널
- 위험 키워드가 3개 이상이면 신뢰도 감소
- 뉴스 감성이 부정적이면 VIG 유지 강화

### 포트폴리오 비중 추천
- 뉴스 감성 < 40: VIG 점수 +10, QLD 점수 -10
- 뉴스 감성 > 60: VIG 점수 -10, QLD 점수 +10
- 위험 키워드가 많으면 방어적 자산 선호

## 📦 필요한 패키지

백엔드 `requirements.txt`에 추가된 패키지:
- feedparser==6.0.10
- beautifulsoup4==4.12.2
- lxml==5.1.0
- vaderSentiment==3.3.2
- nltk==3.8.1
- newspaper3k==0.2.8

## 🚀 실행 전 설치

```powershell
cd backend
.\venv\Scripts\Activate.ps1
pip install feedparser beautifulsoup4 lxml vaderSentiment nltk newspaper3k
```

NLTK 데이터는 자동으로 다운로드됩니다.

## ✨ 특징

1. **자동 중복 제거**: 같은 뉴스는 한 번만 저장
2. **실시간 감성 분석**: VADER로 즉시 분석
3. **위험 키워드 자동 감지**: 20개 키워드 모니터링
4. **시각화**: 색상 기반 감성 점수, Pie Chart
5. **알고리즘 통합**: 스위칭 신호와 포트폴리오 추천에 반영

## 📝 참고사항

- RSS 피드 접근이 제한될 수 있습니다
- 일부 소스는 CORS 이슈가 있을 수 있습니다
- 뉴스 수집은 수동으로 실행해야 합니다 (자동 스케줄링은 추후 구현 가능)

---

**구현 완료일**: 2024년
**상태**: ✅ 완전 구현 완료



